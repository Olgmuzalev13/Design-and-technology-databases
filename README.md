# APCS – Automated Process Control System

![Coverage](https://raw.githubusercontent.com/OWNER/REPO/BRANCH/.github/badges/coverage.svg)

Учебный проект, предназначенный для использования в рамках 8 семестра МГТУ им. Баумана по дисциплине
**«Конструкторско-технологические базы данных электронно-вычислительных средств»**.

Проект представляет собой **универсальную программную основу для разработки АСУ ТП**, на базе которой студенты могут реализовывать собственные предметные области и сценарии автоматизации.

---

## Назначение проекта

В рамках курса требуется разработать программную часть АСУ ТП, включающую:

* работу с базой данных
* учет пользователей и сотрудников
* контроль доступа
* расширяемую структуру данных под конкретную технологическую систему

Данный репозиторий решает эту задачу на базовом уровне и используется как **стартовая точка** для дальнейшей разработки.

---

## Реализованный функционал

На текущий момент реализовано:

* регистрация и авторизация пользователей
* модель сотрудника, связанная с учетной записью
* отображение списка сотрудников
* подключение PostgreSQL
* миграции базы данных
* базовый веб-интерфейс на Bootstrap
* автоматические тесты
* проверка качества кода (flake8)
* CI с проверкой линтера и покрытия тестами

Архитектура не привязана к конкретному объекту автоматизации и может быть расширена под:

* цех
* участок
* станцию
* технологическую линию
* распределенную систему управления

---

## Технологический стек

* Python 3.12
* Django
* PostgreSQL 15
* Docker / Docker Compose
* Bootstrap 5
* flake8
* pytest
* GitHub Actions

Используются только стабильные и поддерживаемые инструменты.

---

## Быстрый старт (Docker)

### 1. Создание файла окружения

Создайте файл `.env` по образцу `.env.example`, изменив пароль и при необходимости имя базы данных:

```
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=db
POSTGRES_PORT=5432
```

### 2. Запуск проекта

```bash
docker compose up --build
```

(или make build)

После запуска:

* Django доступен на `http://localhost:8000`
* PostgreSQL работает внутри контейнера

---

## Локальный запуск (без Docker)

Активируйте виртуальное окружение и установите зависимости:

```bash
source env/bin/activate
pip install .
```

Далее стандартный цикл Django:

* создание миграций
* применение миграций
* запуск сервера разработки

Этот режим удобен для отладки и понимания работы Django без контейнеризации.

---

## Makefile: назначение команд

В проекте используется Makefile для упрощения типовых действий:

* **local**
  Выполняет миграции и запускает Django локально (важно предварительно активировать venv в каждом новом терминале)

* **db**
  Поднимает отдельно базу данных используется перед локальным запуском Django

* **up**
  Запускает проект в Docker

* **down**
  Останавливает контейнеры и удаляет volumes базы данных

* **compose**
  Пересобирает образы и запускает контейнеры

* **logs**
  Показывает логи контейнера с Django

* **tests**
  Запускает тесты с подсчетом покрытия и формирует HTML-отчет

* **lint**
  Проверяет код на соответствие правилам flake8

Makefile не скрывает логику команд, а только сокращает количество вводимых действий.

---

## Тестирование и покрытие

Для проекта настроены автоматические тесты:

* проверка моделей
* проверка регистрации и авторизации
* проверка доступа к защищенным страницам

Подсчет покрытия:

* используется `coverage.py`
* отчет доступен в консоли
* HTML-отчет формируется локально

Минимально допустимое покрытие в CI: **75%**.

---

## Контроль качества кода

В проекте действуют:

* **pre-commit хуки**

  * flake8
  * запуск тестов
* **CI**

  * проверка линтера
  * запуск тестов
  * проверка покрытия

Невозможно:

* закоммитить код с нарушением flake8
* влить изменения в `main` при недостаточном покрытии тестами

Это сознательно приближает учебный проект к реальной промышленной разработке.

---

## Дальнейшие шаги по разработке

Предварительно рекомендуется прочитать еще README.md по адресу project8sem/README.md  для понимания базовой структуры проекта и
README.md по адресу pproject8sem/core/README.md для понимания минимальной основы проекта которая была заложена.


Для продолжения работы над проектом в рамках учебного курса рекомендуется следующий рабочий процесс:

1. **Создание рабочей копии репозитория**  
   Сделайте форк данного репозитория для вашей команды или индивидуальной работы.

2. **Организация ветвления**  
   Создайте стабильную ветку `develop` в вашем репозитории. Все дальнейшие задачи следует выполнять в отдельных feature-ветках, ответвляясь от `develop`. Названия веток должны отражать суть работы, например: `seminar1`.

3. **Выполнение семинарских заданий**  
   Каждое задание выполняется в своей ветке. После реализации необходимо:
   * Убедиться в корректности работы нового функционала
   * Проверить, что вы полностью **понимаете** написанный код и его место в архитектуре проекта
   * Пройти все проверки качества кода (линтер, тесты)

4. **Процесс интеграции изменений**  
   Завершённые задачи интегрируются в ветку `develop` через Pull Request (ПР). Каждый ПР должен содержать:
   * Чёткое описание изменений словами в описании ПР
   * Подтверждение прохождения тестов
   * Отсутствие нарушений стиля кода

5. **Демонстрация результатов**  
   Регулярно синхронизируйте состояние ветки `develop` с преподавателем, демонстрируя:
   * Работающий новый функционал в системе
   * Конкретные изменения в коде через принятые Pull Request
   * Понимание архитектурных решений и реализованной логики

Такой подход обеспечивает систематическое развитие проекта в соответствии с принципами промышленной разработки, позволяя сосредоточиться на качестве кода и глубине понимания реализуемых решений.

## Образовательная цель

Проект предназначен не для формальной «сдачи семинаров, а для формирования правильного подхода к разработке ПО для АСУ ТП:

* понимание архитектуры web-приложений
* работа с БД
* контроль качества кода
* автоматизация проверок
* воспроизводимая среда разработки

Дальнейшее развитие проекта предполагается в рамках семестра студентами самостоятельно.